const data = [
    ["2020-12-27",1256,0,0],
    ["2020-12-28",2283,0,0],
    ["2020-12-29",3441,0,0],
    ["2020-12-30",3462,0,0],
    ["2020-12-31",1304,0,0],
    ["2021-01-01",262,0,0],
    ["2021-01-02",1256,0,0],
    ["2021-01-03",915,0,0],
    ["2021-01-04",3568,0,0],
    ["2021-01-05",4512,0,0],
    ["2021-01-06",5802,0,0],
    ["2021-01-07",7918,0,0],
    ["2021-01-08",9918,0,0],
    ["2021-01-09",1991,0,0],
    ["2021-01-10",1709,0,0],
    ["2021-01-11",9723,0,0],
    ["2021-01-12",13336,0,0],
    ["2021-01-13",13436,0,0],
    ["2021-01-14",14903,0,0],
    ["2021-01-15",13477,0,0],
    ["2021-01-16",3311,0,0],
    ["2021-01-17",2417,621,0],
    ["2021-01-18",11896,1772,0],
    ["2021-01-19",11995,2677,0],
    ["2021-01-20",12878,2560,0],
    ["2021-01-21",14807,1705,0],
    ["2021-01-22",14279,993,0],
    ["2021-01-23",2817,835,0],
    ["2021-01-24",2200,855,1256],
    ["2021-01-25",9448,2900,2283],
    ["2021-01-26",10245,3928,3441],
    ["2021-01-27",8782,4455,3462],
    ["2021-01-28",6957,6021,1304],
    ["2021-01-29",6003,7672,262],
    ["2021-01-30",714,1064,1256],
    ["2021-01-31",695,1120,915],
    ["2021-02-01",3629,7527,3568],
    ["2021-02-02",3856,9796,4512],
    ["2021-02-03",4207,10555,5802],
    ["2021-02-04",3717,11378,7918],
    ["2021-02-05",0,0,9918],
    ["2021-02-06",0,0,1991],
    ["2021-02-07",0,0,1709],
    ["2021-02-08",0,0,9723],
    ["2021-02-09",0,0,13336],
    ["2021-02-10",0,0,13436],
    ["2021-02-11",0,0,14903],
    ["2021-02-12",0,0,13477],
    ["2021-02-13",0,0,3311],
    ["2021-02-14",0,0,2417],
    ["2021-02-15",0,0,11896],
    ["2021-02-16",0,0,11995],
    ["2021-02-17",0,0,12878],
    ["2021-02-18",0,0,14807],
    ["2021-02-19",0,0,14279],
    ["2021-02-20",0,0,2817],
    ["2021-02-21",0,0,2200],
    ["2021-02-22",0,0,9448],
    ["2021-02-23",0,0,10245],
    ["2021-02-24",0,0,8782],
    ["2021-02-25",0,0,6957],
    ["2021-02-26",0,0,6003],
    ["2021-02-27",0,0,714],
    ["2021-02-28",0,0,695],
    ["2021-03-01",0,0,3629],
    ["2021-03-02",0,0,3856],
    ["2021-03-03",0,0,4207],
    ["2021-03-04",0,0,3717],
  ];
// den, prvni, druha, druha_plan

Highcharts.setOptions({
    lang: {
        numericSymbols: [" tis.", " mil.", " mld.", "T", "P", "E"]
    }
});

function niceNum(val) {
    return val.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ');
}

Highcharts.chart('vak_druha_graf', {
    chart: {
        type: 'column',
        spacing: [10, 0, 15, 0]
    },
    title: {
        text: 'Aplikované a plánované dávky očkování'
    },
    subtitle: {
        text: 'počítáno 28 dní mezi dávkami'
    },
    xAxis: {
        categories: data.map((d) => d[0]),
        crosshair: true,
        labels: {
            formatter: function() {
                const parts = this.value.split('-')
                return parseInt(parts[2]) + '. ' + parseInt(parts[1]) + '.'
            }
        },
    },
    credits: {
        text: 'Zdroj: ÚZIS',
        href: 'https://onemocneni-aktualne.mzcr.cz/api/v2/covid-19',
    },
    yAxis: {
        min: 0,
        title: {
            text: 'počet dávek'
        }
    },
    tooltip: {
        formatter: function() {
            const dt = this.x.split('-')
            return `<b>${parseInt(dt[2])}. ${parseInt(dt[1])}. ${parseInt(dt[0])}</b><br>` +
            `Prvních dávek: ${niceNum(this.points[0].y)}<br>` +
            `Druhých dávek: ${niceNum(this.points[1].y)}<br>` +
            `Druhých dávek v plánu: ${niceNum(this.points[2].y)}`
        },
        shared: true,
        useHTML: true
    },
    plotOptions: {
        column: {
            pointPadding: 0.2,
            borderWidth: 0
        }
    },
    series: [{
        name: 'První dávky',
        data: data.map((d) => d[1]),
        color: '#3182bd',
    }, {
        name: 'Druhé dávky',
        data: data.map((d) => d[2]),
        color: '#de2d26',

    }, {
        name: 'Plánované druhé dávky',
        data: data.map((d) => d[3]),
        color: '#fc9272',
    }]
});